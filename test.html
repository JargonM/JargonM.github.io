<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Whack-A-Mole</title>
<style>
#gameBoard{
border: 5px solid black;
width: 315px;
height: 315px;
background-color: green;
}
td{
height: 100px;
width: 100px;
border-radius: 50px;
background-color: green;
}
button{
margin-top: 20px;
padding: 10px 20px;
font-size: 16px;
}
</style>
</head>
<body>
<h1>Welcome To Whack-A-Mole</h1>
<h2 id="score">Score: </h2>
<h2 id="timer">Time: 120</h2>
<div id="gameBoard"></div>
<button onclick="startGame()">Start Game</button>


<script>
let time = 1500;
let decrease = 10;
let minTime = 200;
let countdown = 120;
let countdownInterval;
let gameRunning = false;

function startup(){
    const table = document.createElement('table');
    document.getElementById('gameBoard').appendChild(table);

    for(let row = 0; row < 3; row++){
        const tr = document.createElement('tr');

        for(let col = 0; col < 3; col++){
            const td = document.createElement('td');
            td.setAttribute('onclick', 'checkMole(this)');
            tr.appendChild(td);

            td.addEventListener('mouseenter', () => {
            td.style.borderColor = 'orange';
        });

            td.addEventListener('mouseleave', () => {
            td.style.borderColor = 'black';
        });
}
    table.appendChild(tr);
    }
}

function placeMole(){
if (!gameRunning) return;

const cells = document.querySelectorAll('td');
const randomIndex = Math.floor(Math.random() * cells.length);

cells.forEach(cell => cell.textContent = '');
cells[randomIndex].style.backgroundColor = 'brown';

setTimeout(() => {
    if (cells[randomIndex].style.backgroundColor === 'brown') {
        cells[randomIndex].style.backgroundColor = 'green';
        }
    }, time = Math.max(minTime, time - decrease));
}

let score = 0;

function checkMole(cell){
    if(cell.style.backgroundColor === 'brown'){
    score++;
    document.getElementById('score').textContent = 'Score: ' + score;
    cell.style.backgroundColor = 'green';
    }
}

function runMoleLoop(){
if (!gameRunning) return;
placeMole();
setTimeout(runMoleLoop, time);
}

function startGame(){
    if (gameRunning) return;
    gameRunning = true;

    score = 0;
    document.getElementById('score').textContent = "Score: 0";

    countdown = 120;
    document.getElementById('timer').textContent = "Time: 120";

    countdownInterval = setInterval(() => {
        countdown--;
    document.getElementById('timer').textContent = "Time: " + countdown;

    if (countdown <= 0){
        gameRunning = false;
        clearInterval(countdownInterval);
        alert("Time's up! Your score is: " + score);
    }
    }, 1000);

    runMoleLoop();
}

startup();
</script>
</body>
</html>